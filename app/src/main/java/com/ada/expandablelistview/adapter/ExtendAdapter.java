package com.ada.expandablelistview.adapter;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.BaseExpandableListAdapter;import android.widget.ImageView;import android.widget.TextView;import android.widget.Toast;import com.ada.expandablelistview.R;import com.ada.expandablelistview.control.NoSrcollGridView;import com.ada.expandablelistview.manager.DBManager;import java.util.HashMap;import java.util.List;/** * @author AdaDong */public class ExtendAdapter extends BaseExpandableListAdapter {    private Context mContext;    LayoutInflater inflater;    private HashMap<String, String> crop;    private NoSrcollGridView gridView;    /**     * List<String> ClassificationList     * HashMap<String, List<HashMap<String, String>>> Crops_Group_By_Kind_List     */    public ExtendAdapter(Context context) {        this.mContext = context;        inflater = LayoutInflater.from(context);    }    @Override    public int getGroupCount() {        return DBManager.ClassificationList.size();    }    @Override    public int getChildrenCount(int groupPosition) {//		String name=DBManager.ClassificationList.get(groupPosition);//		return DBManager.Crops_Group_By_Kind_List.get(name).size();        return 1;    }    @Override    public Object getGroup(int groupPosition) {        return DBManager.ClassificationList.get(groupPosition);    }    @Override    public Object getChild(int groupPosition, int childPosition) {        String name = DBManager.ClassificationList.get(groupPosition);        return DBManager.Crops_Group_By_Kind_List.get(name).get(childPosition);    }    @Override    public long getGroupId(int groupPosition) {        return groupPosition;    }    @Override    public long getChildId(int groupPosition, int childPosition) {        return childPosition;    }    @Override    public boolean hasStableIds() {        return true;    }    @Override    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {        ViewGroupHolder holder = null;        if (convertView == null) {            convertView = inflater.inflate(R.layout.item_lv_extend, null);            holder = new ViewGroupHolder(convertView);            convertView.setTag(holder);        } else {            holder = (ViewGroupHolder) convertView.getTag();        }        holder.txtGroupName.setText((String) getGroup(groupPosition));        if (isExpanded){            holder.imgPic.setImageResource(R.mipmap.ic_up);        }else{            holder.imgPic.setImageResource(R.mipmap.ic_next            );        }        return convertView;    }    @Override    public View getChildView(final int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {        if (convertView == null) {            convertView = inflater.inflate(R.layout.item_expand_list_child, null);        }        gridView = (NoSrcollGridView) convertView;        // 创建 GridView 适配器        String name = DBManager.ClassificationList.get(groupPosition);        List<HashMap<String, String>> listmap = DBManager.Crops_Group_By_Kind_List.get(name);        DefaultCropAdapter gridViewAdapter = new DefaultCropAdapter(mContext, listmap);        gridView.setAdapter(gridViewAdapter);        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView parent, View view, int position, long id) {                Toast.makeText(mContext, "点击了第" + (groupPosition + 1) + "组，第" +                        (position + 1) + "项", Toast.LENGTH_SHORT).show();            }        });        return convertView;    }    @Override    public boolean isChildSelectable(int groupPosition, int childPosition) {        return true;    }    static class ViewGroupHolder {        final TextView txtGroupName;        final ImageView imgPic;        ViewGroupHolder(View view) {            imgPic=(ImageView) view.findViewById(R.id.img_expand) ;            txtGroupName = (TextView) view.findViewById(R.id.txt_group_name);        }    }}